import{$ as D,H as O,a as f,af as y,a1 as d,a5 as a,a2 as e,a4 as s,a0 as u,ab as x,ae as _,a8 as g,a7 as m,a6 as i,a9 as b,aa as C,ac as w,ag as q,au as A,ah as P,ad as h,ai as T,at as j}from"./index-uycLlxS2.js";import{Q as V}from"./QCircularProgress-DCbsEVtm.js";import{u as E,f as H,h as Q,i as R,a as z}from"./QSelect-Dzl-7L6b.js";import{b as G,Z as J,Q as K}from"./ZoneDetailsDialog-CZJ3rY1x.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"schedule-page"},N={class:"page-header q-mb-lg"},ee={class:"row items-center justify-between"},te={class:"q-gutter-sm"},se={class:"weekly-overview q-mb-lg"},oe={class:"row items-center q-gutter-lg"},le={class:"col-auto"},ae={class:"progress-text"},ce={class:"text-h4 text-primary"},ie={class:"col"},ne={class:"row q-gutter-md"},re={class:"col"},de={class:"text-h5 text-positive"},ue={class:"col"},me={class:"text-h5 text-info"},pe={class:"col"},_e={class:"text-h5 text-warning"},ge={class:"daily-schedule"},he={class:"row q-gutter-md"},ve={class:"row items-center justify-between text-white"},ke={class:"text-h6"},fe={class:"text-caption opacity-80"},ye={class:"day-progress"},xe={class:"text-caption text-white"},be={class:"q-gutter-xs"},Ce={key:0,class:"text-center q-pa-lg text-grey"},we={key:0,class:"today-focus q-mt-lg"},qe={class:"text-h6 q-mb-md"},Qe={class:"row q-gutter-md"},Se={class:"row items-center q-gutter-sm"},Ze={class:"col"},$e={class:"text-body2 text-weight-medium"},Me={class:"text-caption text-grey"},Ae={__name:"SchedulePage",setup(Pe){const p=D(),c=E();O(()=>{c.setNotifyFunction(p.notify)});const W=f(()=>c.totalZones-c.completedZones),v=f(()=>new Date().toLocaleDateString("en-US",{weekday:"long"})),S=f(()=>c.zones.filter(o=>o.scheduledDay===v.value)),B=o=>o===v.value,Z=o=>({Monday:"blue",Tuesday:"green",Wednesday:"orange",Thursday:"purple",Friday:"deep-purple"})[o]||"grey",F=o=>{if(o.length===0)return 0;const t=o.filter(l=>l.completed).length;return Math.round(t/o.length*100)},k=o=>o.filter(t=>t.completed).length,$=async o=>{await c.updateZoneStatus(o.id,!o.completed)},M=async(o,t)=>{p.dialog({title:"Confirm Action",message:`Mark all ${o} zones as ${t?"completed":"incomplete"}?`,cancel:!0,persistent:!0}).onOk(async()=>{await c.markAllZonesForDay(o,t)})},I=()=>{p.dialog({title:"Mark All Complete",message:"Mark all zones as completed for this week?",cancel:!0,persistent:!0,ok:{color:"positive",label:"Mark All Complete"}}).onOk(async()=>{const o=c.zones.filter(t=>!t.completed).map(t=>c.updateZoneStatus(t.id,!0));await Promise.all(o)})},L=()=>{p.dialog({title:"Reset Week",message:"Reset all zones to incomplete status?",cancel:!0,persistent:!0,ok:{color:"warning",label:"Reset Week"}}).onOk(async()=>{await c.resetWeeklyProgress()})};return(o,t)=>(d(),y(K,{padding:""},{default:a(()=>[e("div",Y,[e("div",N,[e("div",ee,[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-h4 q-my-none"},"Weekly Schedule"),e("p",{class:"text-subtitle1 text-grey q-mt-sm q-mb-none"}," View and manage the weekly grass cutting schedule ")],-1)),e("div",te,[s(_,{outline:"",color:"warning",icon:"refresh",label:"Reset Week",onClick:L}),s(_,{color:"positive",icon:"check_circle",label:"Mark All Complete",onClick:I})])])]),e("div",se,[s(g,{flat:"",bordered:"",class:"q-pa-md"},{default:a(()=>[e("div",oe,[e("div",le,[s(V,{value:m(c).completionPercentage,size:"100px",thickness:.15,color:"primary","track-color":"grey-3",class:"progress-circle"},{default:a(()=>[e("div",ae,[e("div",ce,i(m(c).completionPercentage)+"%",1),t[3]||(t[3]=e("div",{class:"text-caption"},"Complete",-1))])]),_:1},8,["value"])]),e("div",ie,[e("div",ne,[e("div",re,[e("div",de,i(m(c).completedZones),1),t[4]||(t[4]=e("div",{class:"text-caption text-grey"},"Completed Zones",-1))]),e("div",ue,[e("div",me,i(m(c).totalZones),1),t[5]||(t[5]=e("div",{class:"text-caption text-grey"},"Total Zones",-1))]),e("div",pe,[e("div",_e,i(W.value),1),t[6]||(t[6]=e("div",{class:"text-caption text-grey"},"Remaining",-1))])])])])]),_:1})]),e("div",ge,[e("div",he,[(d(!0),u(b,null,C(m(c).zonesByDay,(l,r)=>(d(),u("div",{key:r,class:"col-12 col-sm-6 col-lg"},[s(g,{flat:"",bordered:"",class:w(["day-card",{"today-card":B(r)}])},{default:a(()=>[s(q,{class:w(["day-header",`bg-schedule-${r.toLowerCase()}`])},{default:a(()=>[e("div",ve,[e("div",null,[e("div",ke,i(r),1),e("div",fe,i(l.length)+" zone"+i(l.length!==1?"s":""),1)]),e("div",ye,[s(V,{value:F(l),size:"40px",thickness:.2,color:"white","track-color":"rgba(255,255,255,0.3)"},{default:a(()=>[e("div",xe,i(k(l))+"/"+i(l.length),1)]),_:2},1032,["value"])])])]),_:2},1032,["class"]),s(q,{class:"q-pa-none"},{default:a(()=>[s(G,null,{default:a(()=>[(d(!0),u(b,null,C(l,n=>(d(),y(H,{key:n.id,clickable:"",onClick:U=>m(c).selectZone(n),class:"zone-item"},{default:a(()=>[s(Q,{avatar:""},{default:a(()=>[s(A,{"model-value":n.completed,"onUpdate:modelValue":U=>$(n),color:Z(r),onClick:t[0]||(t[0]=P(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue","color"])]),_:2},1024),s(Q,null,{default:a(()=>[s(R,{class:w({"text-strike":n.completed})},{default:a(()=>[h(i(n.name),1)]),_:2},1032,["class"]),s(R,{caption:""},{default:a(()=>[h(i(n.estimatedTime)+"min â€¢ "+i(n.priority)+" priority ",1)]),_:2},1024)]),_:2},1024),s(Q,{side:""},{default:a(()=>[e("div",be,[s(z,{size:"sm",color:n.completed?"positive":"grey-4","text-color":n.completed?"white":"grey-8",icon:n.completed?"check":"schedule"},{default:a(()=>[h(i(n.completed?"Done":"Todo"),1)]),_:2},1032,["color","text-color","icon"])])]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:2},1024),l.length===0?(d(),u("div",Ce,[s(T,{name:"event_available",size:"2rem",class:"q-mb-sm"}),t[7]||(t[7]=e("div",null,"No zones scheduled",-1))])):x("",!0)]),_:2},1024),l.length>0?(d(),y(j,{key:0,class:"q-pa-md"},{default:a(()=>[s(_,{flat:"",dense:"",color:Z(r),icon:"check_circle",label:"Complete All",onClick:n=>M(r,!0),disable:k(l)===l.length,size:"sm"},null,8,["color","onClick","disable"]),s(_,{flat:"",dense:"",color:"grey",icon:"radio_button_unchecked",label:"Reset All",onClick:n=>M(r,!1),disable:k(l)===0,size:"sm"},null,8,["onClick","disable"])]),_:2},1024)):x("",!0)]),_:2},1032,["class"])]))),128))])]),S.value.length>0?(d(),u("div",we,[s(g,{flat:"",bordered:"",class:"q-pa-md bg-primary text-white"},{default:a(()=>[e("div",qe,[s(T,{name:"today",class:"q-mr-sm"}),h(" Today's Focus - "+i(v.value),1)]),e("div",Qe,[(d(!0),u(b,null,C(S.value,l=>(d(),u("div",{key:l.id,class:"col-12 col-sm-6 col-md-4"},[s(g,{flat:"",class:"today-zone-card cursor-pointer",onClick:r=>m(c).selectZone(l)},{default:a(()=>[s(q,{class:"q-pa-sm"},{default:a(()=>[e("div",Se,[s(A,{"model-value":l.completed,"onUpdate:modelValue":r=>$(l),color:"primary",onClick:t[1]||(t[1]=P(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"]),e("div",Ze,[e("div",$e,i(l.name),1),e("div",Me,i(l.estimatedTime)+" minutes",1)])])]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])]),_:1})])):x("",!0)]),s(J)]),_:1}))}},Fe=X(Ae,[["__scopeId","data-v-77ae265b"]]);export{Fe as default};
