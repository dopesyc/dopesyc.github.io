import{c as ae,a as g,h as s,b as le,g as oe,d as Rt,ai as $,y as Ge,A as Ke,N as Tt,r as z,w as A,O as Ft,M as Ne,ay as Ye,H as Te,Z as Bt,Y as Dt,o as Je,V as Ot,az as Lt,aA as $e,aB as ke,aC as Qe,aD as Vt,F as Xe,aE as Mt,au as Pe,aF as X,ae as Z,al as jt,$ as Et,af as zt,a1 as H,a5 as x,a2 as b,a4 as q,a8 as U,ag as I,a6 as V,a7 as ee,a0 as Y,a9 as He,aa as Ue,ac as At,aG as Nt,ad as xe}from"./index-uycLlxS2.js";import{Q as Re}from"./QLinearProgress-Cg6dQLb6.js";import{j as $t,k as Qt,l as et,b as Ht,u as Ut,a as Ie}from"./QSelect-Dzl-7L6b.js";import{Q as It}from"./QTooltip-CYsWlyF6.js";import{b as Zt,Z as Wt,Q as Gt}from"./ZoneDetailsDialog-CZJ3rY1x.js";import{_ as Kt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J=ae({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:a}){const l=oe(),u=g(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return s("td",{class:u.value},le(a.default));const n=l.vnode.key,m=(e.props.colsMap!==void 0?e.props.colsMap[n]:null)||e.props.col;if(m===void 0)return;const{row:i}=e.props;return s("td",{class:u.value+m.__tdClass(i),style:m.__tdStyle(i)},le(a.default))}}}),Yt=ae({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:a,emit:l}){const u=oe(),{proxy:{$q:n}}=u,m=i=>{l("click",i)};return()=>{if(e.props===void 0)return s("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:m},le(a.default));let i,c;const d=u.vnode.key;if(d){if(i=e.props.colsMap[d],i===void 0)return}else i=e.props.col;if(i.sortable===!0){const o=i.align==="right"?"unshift":"push";c=Rt(a.default,[]),c[o](s($,{class:i.__iconClass,name:n.iconSet.table.arrowUp}))}else c=le(a.default);const C={class:i.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:i.headerStyle,onClick:o=>{i.sortable===!0&&e.props.sort(i),m(o)}};return s("th",C,c)}}}),Jt=["horizontal","vertical","cell","none"],Xt=ae({name:"QMarkupTable",props:{...Ge,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Jt.includes(e)}},setup(e,{slots:a}){const l=oe(),u=Ke(e,l.proxy.$q),n=g(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(u.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>s("div",{class:n.value},[s("table",{class:"q-table"},le(a.default))])}});function tt(e,a){return s("div",e,[s("table",{class:"q-table"},a)])}const el={list:Zt,table:Xt},tl=["list","table","__qtable"],ll=ae({name:"QVirtualScroll",props:{...$t,type:{type:String,default:"list",validator:e=>tl.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:Tt},setup(e,{slots:a,attrs:l}){let u;const n=z(null),m=g(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:i,localResetVirtualScroll:c,padVirtualScroll:d,onVirtualScrollEvt:C}=Qt({virtualScrollLength:m,getVirtualScrollTarget:F,getVirtualScrollEl:T}),o=g(()=>{if(m.value===0)return[];const f=(v,P)=>({index:i.value.from+P,item:v});return e.itemsFn===void 0?e.items.slice(i.value.from,i.value.to).map(f):e.itemsFn(i.value.from,i.value.to-i.value.from).map(f)}),_=g(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),R=g(()=>e.scrollTarget!==void 0?{}:{tabindex:0});A(m,()=>{c()}),A(()=>e.scrollTarget,()=>{p(),k()});function T(){return n.value.$el||n.value}function F(){return u}function k(){u=Ft(T(),e.scrollTarget),u.addEventListener("scroll",C,Ne.passive)}function p(){u!==void 0&&(u.removeEventListener("scroll",C,Ne.passive),u=void 0)}function w(){let f=d(e.type==="list"?"div":"tbody",o.value.map(a.default));return a.before!==void 0&&(f=a.before().concat(f)),Ot(a.after,f)}return Ye(()=>{c()}),Te(()=>{k()}),Bt(()=>{k()}),Dt(()=>{p()}),Je(()=>{p()}),()=>{if(a.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?tt({ref:n,class:"q-table__middle "+_.value},w()):s(el[e.type],{...l,ref:n,class:[l.class,_.value],...R.value},w)}}});let te=0;const al={fullscreen:Boolean,noRouteFullscreenExit:Boolean},ol=["update:fullscreen","fullscreen"];function nl(){const e=oe(),{props:a,emit:l,proxy:u}=e;let n,m,i;const c=z(!1);Lt(e)===!0&&A(()=>u.$route.fullPath,()=>{a.noRouteFullscreenExit!==!0&&o()}),A(()=>a.fullscreen,_=>{c.value!==_&&d()}),A(c,_=>{l("update:fullscreen",_),l("fullscreen",_)});function d(){c.value===!0?o():C()}function C(){c.value!==!0&&(c.value=!0,i=u.$el.parentNode,i.replaceChild(m,u.$el),document.body.appendChild(u.$el),te++,te===1&&document.body.classList.add("q-body--fullscreen-mixin"),n={handler:o},$e.add(n))}function o(){c.value===!0&&(n!==void 0&&($e.remove(n),n=void 0),i.replaceChild(u.$el,m),c.value=!1,te=Math.max(0,te-1),te===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),u.$el.scrollIntoView!==void 0&&setTimeout(()=>{u.$el.scrollIntoView()})))}return Ye(()=>{m=document.createElement("span")}),Te(()=>{a.fullscreen===!0&&C()}),Je(o),Object.assign(u,{toggleFullscreen:d,setFullscreen:C,exitFullscreen:o}),{inFullscreen:c,toggleFullscreen:d}}function rl(e,a){return new Date(e)-new Date(a)}const sl={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function il(e,a,l,u){const n=g(()=>{const{sortBy:c}=a.value;return c&&l.value.find(d=>d.name===c)||null}),m=g(()=>e.sortMethod!==void 0?e.sortMethod:(c,d,C)=>{const o=l.value.find(T=>T.name===d);if(o===void 0||o.field===void 0)return c;const _=C===!0?-1:1,R=typeof o.field=="function"?T=>o.field(T):T=>T[o.field];return c.sort((T,F)=>{let k=R(T),p=R(F);return o.rawSort!==void 0?o.rawSort(k,p,T,F)*_:k==null?-1*_:p==null?1*_:o.sort!==void 0?o.sort(k,p,T,F)*_:ke(k)===!0&&ke(p)===!0?(k-p)*_:Qe(k)===!0&&Qe(p)===!0?rl(k,p)*_:typeof k=="boolean"&&typeof p=="boolean"?(k-p)*_:([k,p]=[k,p].map(w=>(w+"").toLocaleString().toLowerCase()),k<p?-1*_:k===p?0:_)})});function i(c){let d=e.columnSortOrder;if(Vt(c)===!0)c.sortOrder&&(d=c.sortOrder),c=c.name;else{const _=l.value.find(R=>R.name===c);_?.sortOrder&&(d=_.sortOrder)}let{sortBy:C,descending:o}=a.value;C!==c?(C=c,o=d==="da"):e.binaryStateSort===!0?o=!o:o===!0?d==="ad"?C=null:o=!1:d==="ad"?o=!0:C=null,u({sortBy:C,descending:o,page:1})}return{columnToSort:n,computedSortMethod:m,sort:i}}const cl={filter:[String,Object],filterMethod:Function};function ul(e,a){const l=g(()=>e.filterMethod!==void 0?e.filterMethod:(u,n,m,i)=>{const c=n?n.toLowerCase():"";return u.filter(d=>m.some(C=>{const o=i(C,d)+"";return(o==="undefined"||o==="null"?"":o.toLowerCase()).indexOf(c)!==-1}))});return A(()=>e.filter,()=>{Xe(()=>{a({page:1},!0)})},{deep:!0}),{computedFilterMethod:l}}function dl(e,a){for(const l in a)if(a[l]!==e[l])return!1;return!0}function Ze(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const vl={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function fl(e,a){const{props:l,emit:u}=e,n=z(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:l.rowsPerPageOptions.length!==0?l.rowsPerPageOptions[0]:5},l.pagination)),m=g(()=>{const o=l["onUpdate:pagination"]!==void 0?{...n.value,...l.pagination}:n.value;return Ze(o)}),i=g(()=>m.value.rowsNumber!==void 0);function c(o){d({pagination:o,filter:l.filter})}function d(o={}){Xe(()=>{u("request",{pagination:o.pagination||m.value,filter:o.filter||l.filter,getCellValue:a})})}function C(o,_){const R=Ze({...m.value,...o});if(dl(m.value,R)===!0){i.value===!0&&_===!0&&c(R);return}if(i.value===!0){c(R);return}l.pagination!==void 0&&l["onUpdate:pagination"]!==void 0?u("update:pagination",R):n.value=R}return{innerPagination:n,computedPagination:m,isServerSide:i,requestServerInteraction:d,setPagination:C}}function gl(e,a,l,u,n,m){const{props:i,emit:c,proxy:{$q:d}}=e,C=g(()=>u.value===!0?l.value.rowsNumber||0:m.value),o=g(()=>{const{page:P,rowsPerPage:L}=l.value;return(P-1)*L}),_=g(()=>{const{page:P,rowsPerPage:L}=l.value;return P*L}),R=g(()=>l.value.page===1),T=g(()=>l.value.rowsPerPage===0?1:Math.max(1,Math.ceil(C.value/l.value.rowsPerPage))),F=g(()=>_.value===0?!0:l.value.page>=T.value),k=g(()=>(i.rowsPerPageOptions.includes(a.value.rowsPerPage)?i.rowsPerPageOptions:[a.value.rowsPerPage].concat(i.rowsPerPageOptions)).map(L=>({label:L===0?d.lang.table.allRows:""+L,value:L})));A(T,(P,L)=>{if(P===L)return;const M=l.value.page;P&&!M?n({page:1}):P<M&&n({page:P})});function p(){n({page:1})}function w(){const{page:P}=l.value;P>1&&n({page:P-1})}function f(){const{page:P,rowsPerPage:L}=l.value;_.value>0&&P*L<C.value&&n({page:P+1})}function v(){n({page:T.value})}return i["onUpdate:pagination"]!==void 0&&c("update:pagination",{...l.value}),{firstRowIndex:o,lastRowIndex:_,isFirstPage:R,isLastPage:F,pagesNumber:T,computedRowsPerPageOptions:k,computedRowsNumber:C,firstPage:p,prevPage:w,nextPage:f,lastPage:v}}const ml={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},bl=["update:selected","selection"];function yl(e,a,l,u){const n=g(()=>{const F={};return e.selected.map(u.value).forEach(k=>{F[k]=!0}),F}),m=g(()=>e.selection!=="none"),i=g(()=>e.selection==="single"),c=g(()=>e.selection==="multiple"),d=g(()=>l.value.length!==0&&l.value.every(F=>n.value[u.value(F)]===!0)),C=g(()=>d.value!==!0&&l.value.some(F=>n.value[u.value(F)]===!0)),o=g(()=>e.selected.length);function _(F){return n.value[F]===!0}function R(){a("update:selected",[])}function T(F,k,p,w){a("selection",{rows:k,added:p,keys:F,evt:w});const f=i.value===!0?p===!0?k:[]:p===!0?e.selected.concat(k):e.selected.filter(v=>F.includes(u.value(v))===!1);a("update:selected",f)}return{hasSelectionMode:m,singleSelection:i,multipleSelection:c,allRowsSelected:d,someRowsSelected:C,rowsSelectedNumber:o,isRowSelected:_,clearSelection:R,updateSelection:T}}function We(e){return Array.isArray(e)?e.slice():[]}const hl={expanded:Array},_l=["update:expanded"];function Sl(e,a){const l=z(We(e.expanded));A(()=>e.expanded,i=>{l.value=We(i)});function u(i){return l.value.includes(i)}function n(i){e.expanded!==void 0?a("update:expanded",i):l.value=i}function m(i,c){const d=l.value.slice(),C=d.indexOf(i);c===!0?C===-1&&(d.push(i),n(d)):C!==-1&&(d.splice(C,1),n(d))}return{isRowExpanded:u,setExpanded:n,updateExpanded:m}}const wl={visibleColumns:Array};function Cl(e,a,l){const u=g(()=>{if(e.columns!==void 0)return e.columns;const c=e.rows[0];return c!==void 0?Object.keys(c).map(d=>({name:d,label:d.toUpperCase(),field:d,align:ke(c[d])?"right":"left",sortable:!0})):[]}),n=g(()=>{const{sortBy:c,descending:d}=a.value;return(e.visibleColumns!==void 0?u.value.filter(o=>o.required===!0||e.visibleColumns.includes(o.name)===!0):u.value).map(o=>{const _=o.align||"right",R=`text-${_}`;return{...o,align:_,__iconClass:`q-table__sort-icon q-table__sort-icon--${_}`,__thClass:R+(o.headerClasses!==void 0?" "+o.headerClasses:"")+(o.sortable===!0?" sortable":"")+(o.name===c?` sorted ${d===!0?"sort-desc":""}`:""),__tdStyle:o.style!==void 0?typeof o.style!="function"?()=>o.style:o.style:()=>null,__tdClass:o.classes!==void 0?typeof o.classes!="function"?()=>R+" "+o.classes:T=>R+" "+o.classes(T):()=>R}})}),m=g(()=>{const c={};return n.value.forEach(d=>{c[d.name]=d}),c}),i=g(()=>e.tableColspan!==void 0?e.tableColspan:n.value.length+(l.value===!0?1:0));return{colList:u,computedCols:n,computedColsMap:m,computedColspan:i}}const ve="q-table__bottom row items-center",lt={};et.forEach(e=>{lt[e]={}});const ql=ae({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...lt,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Ge,...al,...wl,...cl,...vl,...hl,...ml,...sl},emits:["request","virtualScroll",...ol,..._l,...bl],setup(e,{slots:a,emit:l}){const u=oe(),{proxy:{$q:n}}=u,m=Ke(e,n),{inFullscreen:i,toggleFullscreen:c}=nl(),d=g(()=>typeof e.rowKey=="function"?e.rowKey:t=>t[e.rowKey]),C=z(null),o=z(null),_=g(()=>e.grid!==!0&&e.virtualScroll===!0),R=g(()=>" q-table__card"+(m.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),T=g(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":R.value)+(m.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(i.value===!0?" fullscreen scroll":"")),F=g(()=>T.value+(e.loading===!0?" q-table--loading":""));A(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+T.value,()=>{_.value===!0&&o.value?.reset()});const{innerPagination:k,computedPagination:p,isServerSide:w,requestServerInteraction:f,setPagination:v}=fl(u,G),{computedFilterMethod:P}=ul(e,v),{isRowExpanded:L,setExpanded:M,updateExpanded:at}=Sl(e,l),fe=g(()=>{let t=e.rows;if(w.value===!0||t.length===0)return t;const{sortBy:r,descending:y}=p.value;return e.filter&&(t=P.value(t,e.filter,E.value,G)),it.value!==null&&(t=ct.value(e.rows===t?t.slice():t,r,y)),t}),Fe=g(()=>fe.value.length),N=g(()=>{let t=fe.value;if(w.value===!0)return t;const{rowsPerPage:r}=p.value;return r!==0&&(re.value===0&&e.rows!==t?t.length>se.value&&(t=t.slice(0,se.value)):t=t.slice(re.value,se.value)),t}),{hasSelectionMode:W,singleSelection:ot,multipleSelection:Be,allRowsSelected:nt,someRowsSelected:De,rowsSelectedNumber:ge,isRowSelected:me,clearSelection:rt,updateSelection:ne}=yl(e,l,N,d),{colList:st,computedCols:E,computedColsMap:Oe,computedColspan:Le}=Cl(e,p,W),{columnToSort:it,computedSortMethod:ct,sort:be}=il(e,p,st,v),{firstRowIndex:re,lastRowIndex:se,isFirstPage:ye,isLastPage:he,pagesNumber:ie,computedRowsPerPageOptions:ut,computedRowsNumber:ce,firstPage:_e,prevPage:Se,nextPage:we,lastPage:Ce}=gl(u,k,p,w,v,Fe),dt=g(()=>N.value.length===0),vt=g(()=>{const t={};return et.forEach(r=>{t[r]=e[r]}),t.virtualScrollItemSize===void 0&&(t.virtualScrollItemSize=e.dense===!0?28:48),t});function ft(){_.value===!0&&o.value.reset()}function gt(){if(e.grid===!0)return xt();const t=e.hideHeader!==!0?ze:null;if(_.value===!0){const y=a["top-row"],h=a["bottom-row"],S={default:O=>Me(O.item,a.body,O.index)};if(y!==void 0){const O=s("tbody",y({cols:E.value}));S.before=t===null?()=>O:()=>[t()].concat(O)}else t!==null&&(S.before=t);return h!==void 0&&(S.after=()=>s("tbody",h({cols:E.value}))),s(ll,{ref:o,class:e.tableClass,style:e.tableStyle,...vt.value,scrollTarget:e.virtualScrollTarget,items:N.value,type:"__qtable",tableColspan:Le.value,onVirtualScroll:bt},S)}const r=[yt()];return t!==null&&r.unshift(t()),tt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},r)}function mt(t,r){if(o.value!==null){o.value.scrollTo(t,r);return}t=parseInt(t,10);const y=C.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(y!==null){const h=C.value.querySelector(".q-table__middle.scroll"),S=y.offsetTop-e.virtualScrollStickySizeStart,O=S<h.scrollTop?"decrease":"increase";h.scrollTop=S,l("virtualScroll",{index:t,from:0,to:k.value.rowsPerPage-1,direction:O})}}function bt(t){l("virtualScroll",t)}function Ve(){return[s(Re,{class:"q-table__linear-progress",color:e.color,dark:m.value,indeterminate:!0,trackColor:"transparent"})]}function Me(t,r,y){const h=d.value(t),S=me(h);if(r!==void 0){const D={key:h,row:t,pageIndex:y,__trClass:S?"selected":""};if(e.tableRowStyleFn!==void 0&&(D.__trStyle=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const Q=e.tableRowClassFn(t);Q&&(D.__trClass=`${Q} ${D.__trClass}`)}return r(je(D))}const O=a["body-cell"],B=E.value.map(D=>{const Q=a[`body-cell-${D.name}`],de=Q!==void 0?Q:O;return de!==void 0?de(ht({key:h,row:t,pageIndex:y,col:D})):s("td",{class:D.__tdClass(t),style:D.__tdStyle(t)},G(D,t))});if(W.value===!0){const D=a["body-selection"],Q=D!==void 0?D(_t({key:h,row:t,pageIndex:y})):[s(Pe,{modelValue:S,color:e.color,dark:m.value,dense:e.dense,"onUpdate:modelValue":(de,kt)=>{ne([h],[t],de,kt)}})];B.unshift(s("td",{class:"q-table--col-auto-width"},Q))}const j={key:h,class:{selected:S}};if(e.onRowClick!==void 0&&(j.class["cursor-pointer"]=!0,j.onClick=D=>{l("rowClick",D,t,y)}),e.onRowDblclick!==void 0&&(j.class["cursor-pointer"]=!0,j.onDblclick=D=>{l("rowDblclick",D,t,y)}),e.onRowContextmenu!==void 0&&(j.class["cursor-pointer"]=!0,j.onContextmenu=D=>{l("rowContextmenu",D,t,y)}),e.tableRowStyleFn!==void 0&&(j.style=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const D=e.tableRowClassFn(t);D&&(j.class[D]=!0)}return s("tr",j,B)}function yt(){const t=a.body,r=a["top-row"],y=a["bottom-row"];let h=N.value.map((S,O)=>Me(S,t,O));return r!==void 0&&(h=r({cols:E.value}).concat(h)),y!==void 0&&(h=h.concat(y({cols:E.value}))),s("tbody",h)}function je(t){return qe(t),t.cols=t.cols.map(r=>X({...r},"value",()=>G(r,t.row))),t}function ht(t){return qe(t),X(t,"value",()=>G(t.col,t.row)),t}function _t(t){return qe(t),t}function qe(t){Object.assign(t,{cols:E.value,colsMap:Oe.value,sort:be,rowIndex:re.value+t.pageIndex,color:e.color,dark:m.value,dense:e.dense}),W.value===!0&&X(t,"selected",()=>me(t.key),(r,y)=>{ne([t.key],[t.row],r,y)}),X(t,"expand",()=>L(t.key),r=>{at(t.key,r)})}function G(t,r){const y=typeof t.field=="function"?t.field(r):r[t.field];return t.format!==void 0?t.format(y,r):y}const K=g(()=>({pagination:p.value,pagesNumber:ie.value,isFirstPage:ye.value,isLastPage:he.value,firstPage:_e,prevPage:Se,nextPage:we,lastPage:Ce,inFullscreen:i.value,toggleFullscreen:c}));function St(){const t=a.top,r=a["top-left"],y=a["top-right"],h=a["top-selection"],S=W.value===!0&&h!==void 0&&ge.value>0,O="q-table__top relative-position row items-center";if(t!==void 0)return s("div",{class:O},[t(K.value)]);let B;if(S===!0?B=h(K.value).slice():(B=[],r!==void 0?B.push(s("div",{class:"q-table__control"},[r(K.value)])):e.title&&B.push(s("div",{class:"q-table__control"},[s("div",{class:["q-table__title",e.titleClass]},e.title)]))),y!==void 0&&(B.push(s("div",{class:"q-table__separator col"})),B.push(s("div",{class:"q-table__control"},[y(K.value)]))),B.length!==0)return s("div",{class:O},B)}const Ee=g(()=>De.value===!0?null:nt.value);function ze(){const t=wt();return e.loading===!0&&a.loading===void 0&&t.push(s("tr",{class:"q-table__progress"},[s("th",{class:"relative-position",colspan:Le.value},Ve())])),s("thead",t)}function wt(){const t=a.header,r=a["header-cell"];if(t!==void 0)return t(pe({header:!0})).slice();const y=E.value.map(h=>{const S=a[`header-cell-${h.name}`],O=S!==void 0?S:r,B=pe({col:h});return O!==void 0?O(B):s(Yt,{key:h.name,props:B},()=>h.label)});if(ot.value===!0&&e.grid!==!0)y.unshift(s("th",{class:"q-table--col-auto-width"}," "));else if(Be.value===!0){const h=a["header-selection"],S=h!==void 0?h(pe({})):[s(Pe,{color:e.color,modelValue:Ee.value,dark:m.value,dense:e.dense,"onUpdate:modelValue":Ae})];y.unshift(s("th",{class:"q-table--col-auto-width"},S))}return[s("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},y)]}function pe(t){return Object.assign(t,{cols:E.value,sort:be,colsMap:Oe.value,color:e.color,dark:m.value,dense:e.dense}),Be.value===!0&&X(t,"selected",()=>Ee.value,Ae),t}function Ae(t){De.value===!0&&(t=!1),ne(N.value.map(d.value),N.value,t)}const ue=g(()=>{const t=[e.iconFirstPage||n.iconSet.table.firstPage,e.iconPrevPage||n.iconSet.table.prevPage,e.iconNextPage||n.iconSet.table.nextPage,e.iconLastPage||n.iconSet.table.lastPage];return n.lang.rtl===!0?t.reverse():t});function Ct(){if(e.hideBottom===!0)return;if(dt.value===!0){if(e.hideNoData===!0)return;const y=e.loading===!0?e.loadingLabel||n.lang.table.loading:e.filter?e.noResultsLabel||n.lang.table.noResults:e.noDataLabel||n.lang.table.noData,h=a["no-data"],S=h!==void 0?[h({message:y,icon:n.iconSet.table.warning,filter:e.filter})]:[s($,{class:"q-table__bottom-nodata-icon",name:n.iconSet.table.warning}),y];return s("div",{class:ve+" q-table__bottom--nodata"},S)}const t=a.bottom;if(t!==void 0)return s("div",{class:ve},[t(K.value)]);const r=e.hideSelectedBanner!==!0&&W.value===!0&&ge.value>0?[s("div",{class:"q-table__control"},[s("div",[(e.selectedRowsLabel||n.lang.table.selectedRecords)(ge.value)])])]:[];if(e.hidePagination!==!0)return s("div",{class:ve+" justify-end"},pt(r));if(r.length!==0)return s("div",{class:ve},r)}function qt(t){v({page:1,rowsPerPage:t.value})}function pt(t){let r;const{rowsPerPage:y}=p.value,h=e.paginationLabel||n.lang.table.pagination,S=a.pagination,O=e.rowsPerPageOptions.length>1;if(t.push(s("div",{class:"q-table__separator col"})),O===!0&&t.push(s("div",{class:"q-table__control"},[s("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||n.lang.table.recordsPerPage]),s(Ht,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:y,options:ut.value,displayValue:y===0?n.lang.table.allRows:y,dark:m.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":qt})])),S!==void 0)r=S(K.value);else if(r=[s("span",y!==0?{class:"q-table__bottom-item"}:{},[y?h(re.value+1,Math.min(se.value,ce.value),ce.value):h(1,Fe.value,ce.value)])],y!==0&&ie.value>1){const B={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(B.size="sm"),ie.value>2&&r.push(s(Z,{key:"pgFirst",...B,icon:ue.value[0],disable:ye.value,"aria-label":n.lang.pagination.first,onClick:_e})),r.push(s(Z,{key:"pgPrev",...B,icon:ue.value[1],disable:ye.value,"aria-label":n.lang.pagination.prev,onClick:Se}),s(Z,{key:"pgNext",...B,icon:ue.value[2],disable:he.value,"aria-label":n.lang.pagination.next,onClick:we})),ie.value>2&&r.push(s(Z,{key:"pgLast",...B,icon:ue.value[3],disable:he.value,"aria-label":n.lang.pagination.last,onClick:Ce}))}return t.push(s("div",{class:"q-table__control"},r)),t}function Pt(){const t=e.gridHeader===!0?[s("table",{class:"q-table"},[ze()])]:e.loading===!0&&a.loading===void 0?Ve():void 0;return s("div",{class:"q-table__middle"},t)}function xt(){const t=a.item!==void 0?a.item:r=>{const y=r.cols.map(S=>s("div",{class:"q-table__grid-item-row"},[s("div",{class:"q-table__grid-item-title"},[S.label]),s("div",{class:"q-table__grid-item-value"},[S.value])]));if(W.value===!0){const S=a["body-selection"],O=S!==void 0?S(r):[s(Pe,{modelValue:r.selected,color:e.color,dark:m.value,dense:e.dense,"onUpdate:modelValue":(B,j)=>{ne([r.key],[r.row],B,j)}})];y.unshift(s("div",{class:"q-table__grid-item-row"},O),s(jt,{dark:m.value}))}const h={class:["q-table__grid-item-card"+R.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(h.style=[h.style,e.cardStyleFn(r.row)]),e.cardClassFn!==void 0){const S=e.cardClassFn(r.row);S&&(h.class[0]+=` ${S}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(h.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(h.onClick=S=>{l("RowClick",S,r.row,r.pageIndex)}),e.onRowDblclick!==void 0&&(h.onDblclick=S=>{l("RowDblclick",S,r.row,r.pageIndex)}),e.onRowContextmenu!==void 0&&(h.onContextmenu=S=>{l("rowContextmenu",S,r.row,r.pageIndex)})),s("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(r.selected===!0?" q-table__grid-item--selected":"")},[s("div",h,y)])};return s("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},N.value.map((r,y)=>t(je({key:d.value(r),row:r,pageIndex:y}))))}return Object.assign(u.proxy,{requestServerInteraction:f,setPagination:v,firstPage:_e,prevPage:Se,nextPage:we,lastPage:Ce,isRowSelected:me,clearSelection:rt,isRowExpanded:L,setExpanded:M,sort:be,resetVirtualScroll:ft,scrollTo:mt,getCellValue:G}),Mt(u.proxy,{filteredSortedRows:()=>fe.value,computedRows:()=>N.value,computedRowsNumber:()=>ce.value}),()=>{const t=[St()],r={ref:C,class:F.value};return e.grid===!0?t.push(Pt()):Object.assign(r,{class:[r.class,e.cardClass],style:e.cardStyle}),t.push(gt(),Ct()),e.loading===!0&&a.loading!==void 0&&t.push(a.loading()),s("div",r,t)}}}),pl={class:"reports-page"},Pl={class:"page-header q-mb-lg"},xl={class:"row items-center justify-between"},kl={class:"q-gutter-sm"},Rl={class:"metrics-grid q-mb-lg"},Tl={class:"row q-gutter-md"},Fl={class:"col-12 col-sm-6 col-md-3"},Bl={class:"text-h4 text-positive q-mt-sm"},Dl={class:"col-12 col-sm-6 col-md-3"},Ol={class:"text-h4 text-warning q-mt-sm"},Ll={class:"col-12 col-sm-6 col-md-3"},Vl={class:"text-h4 text-info q-mt-sm"},Ml={class:"col-12 col-sm-6 col-md-3"},jl={class:"text-h4 text-purple q-mt-sm"},El={class:"charts-section q-mb-lg"},zl={class:"row q-gutter-md"},Al={class:"col-12 col-lg-8"},Nl={class:"progress-chart"},$l={class:"row items-center q-mb-xs"},Ql={class:"col-3"},Hl={class:"col"},Ul={class:"absolute-full flex flex-center"},Il={class:"text-white text-weight-bold"},Zl={class:"col-2 text-right"},Wl={class:"text-weight-medium"},Gl={class:"col-12 col-lg-4"},Kl={class:"priority-breakdown"},Yl={class:"row items-center justify-between q-mb-xs"},Jl={class:"text-capitalize"},Xl={class:"text-weight-medium"},ea={class:"detailed-zones"},ta={class:"row items-center justify-between q-mb-md"},la={class:"text-weight-medium"},aa={class:"q-ml-sm"},oa={key:0},na={key:1,class:"text-grey"},ra={__name:"ReportsPage",setup(e){const a=Et(),l=Ut();Te(()=>{l.setNotifyFunction(a.notify)});const u=z(!1),n=z(""),m=z({rowsPerPage:10,sortBy:"name",descending:!1}),i=[{name:"name",label:"Zone Name",align:"left",field:"name",sortable:!0},{name:"scheduledDay",label:"Scheduled Day",align:"center",field:"scheduledDay",sortable:!0},{name:"priority",label:"Priority",align:"center",field:"priority",sortable:!0},{name:"estimatedTime",label:"Time (min)",align:"center",field:"estimatedTime",sortable:!0},{name:"areaSize",label:"Area Size",align:"center",field:"areaSize",sortable:!0},{name:"completed",label:"Status",align:"center",field:"completed",sortable:!0},{name:"lastCompleted",label:"Last Completed",align:"center",field:"lastCompleted",sortable:!0},{name:"actions",label:"Actions",align:"center"}],c=g(()=>{const w=l.zones.reduce((f,v)=>f+v.estimatedTime,0);return Math.round(w/60*10)/10}),d=g(()=>{const w=l.zones.reduce((f,v)=>{const P=parseFloat(v.areaSize)||0;return f+P},0);return Math.round(w*10)/10}),C=g(()=>{const w={high:0,medium:0,low:0};return l.zones.forEach(f=>{Object.prototype.hasOwnProperty.call(w,f.priority)&&w[f.priority]++}),w}),o=g(()=>{if(!n.value)return l.zones;const w=n.value.toLowerCase();return l.zones.filter(f=>f.name.toLowerCase().includes(w)||f.scheduledDay.toLowerCase().includes(w)||f.priority.toLowerCase().includes(w))}),_=w=>({Monday:"blue",Tuesday:"green",Wednesday:"orange",Thursday:"purple",Friday:"red"})[w]||"grey",R=w=>({high:"negative",medium:"warning",low:"positive"})[w]||"grey",T=w=>({high:"priority_high",medium:"remove",low:"low_priority"})[w]||"flag",F=w=>w?new Date(w).toLocaleDateString("en-CA",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",k=async()=>{u.value=!0;try{await l.fetchZones(),a.notify({type:"positive",message:"Data refreshed successfully",icon:"refresh"})}catch(w){console.error("Error refreshing data:",w)}finally{u.value=!1}},p=()=>{try{const f=[["Zone Name","Scheduled Day","Priority","Estimated Time (min)","Area Size","Status","Last Completed"].join(","),...l.zones.map(M=>[`"${M.name}"`,M.scheduledDay,M.priority,M.estimatedTime,`"${M.areaSize}"`,M.completed?"Completed":"Incomplete",M.lastCompleted?F(M.lastCompleted):"Never"].join(","))].join(`
`),v=new Blob([f],{type:"text/csv"}),P=URL.createObjectURL(v),L=document.createElement("a");L.href=P,L.download=`grass-cutting-report-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(P),a.notify({type:"positive",message:"Report exported successfully",icon:"download_done"})}catch(w){console.error("Export error:",w),a.notify({type:"negative",message:"Failed to export report",icon:"error"})}};return(w,f)=>(H(),zt(Gt,{padding:""},{default:x(()=>[b("div",pl,[b("div",Pl,[b("div",xl,[f[1]||(f[1]=b("div",null,[b("h1",{class:"text-h4 q-my-none"},"Progress Reports"),b("p",{class:"text-subtitle1 text-grey q-mt-sm q-mb-none"}," Track performance and analyze completion trends ")],-1)),b("div",kl,[q(Z,{outline:"",color:"primary",icon:"download",label:"Export Report",onClick:p}),q(Z,{color:"info",icon:"refresh",label:"Refresh Data",onClick:k,loading:u.value},null,8,["loading"])])])]),b("div",Rl,[b("div",Tl,[b("div",Fl,[q(U,{flat:"",bordered:"",class:"metric-card"},{default:x(()=>[q(I,{class:"text-center"},{default:x(()=>[q($,{name:"check_circle",size:"3rem",color:"positive"}),b("div",Bl,V(ee(l).completedZones),1),f[2]||(f[2]=b("div",{class:"text-caption text-grey"},"Zones Completed",-1))]),_:1,__:[2]})]),_:1})]),b("div",Dl,[q(U,{flat:"",bordered:"",class:"metric-card"},{default:x(()=>[q(I,{class:"text-center"},{default:x(()=>[q($,{name:"schedule",size:"3rem",color:"warning"}),b("div",Ol,V(c.value),1),f[3]||(f[3]=b("div",{class:"text-caption text-grey"},"Total Hours",-1))]),_:1,__:[3]})]),_:1})]),b("div",Ll,[q(U,{flat:"",bordered:"",class:"metric-card"},{default:x(()=>[q(I,{class:"text-center"},{default:x(()=>[q($,{name:"trending_up",size:"3rem",color:"info"}),b("div",Vl,V(ee(l).completionPercentage)+"% ",1),f[4]||(f[4]=b("div",{class:"text-caption text-grey"},"Completion Rate",-1))]),_:1,__:[4]})]),_:1})]),b("div",Ml,[q(U,{flat:"",bordered:"",class:"metric-card"},{default:x(()=>[q(I,{class:"text-center"},{default:x(()=>[q($,{name:"straighten",size:"3rem",color:"purple"}),b("div",jl,V(d.value),1),f[5]||(f[5]=b("div",{class:"text-caption text-grey"},"Total Acres",-1))]),_:1,__:[5]})]),_:1})])])]),b("div",El,[b("div",zl,[b("div",Al,[q(U,{flat:"",bordered:""},{default:x(()=>[q(I,null,{default:x(()=>[f[6]||(f[6]=b("div",{class:"text-h6 q-mb-md"},"Weekly Progress by Day",-1)),b("div",Nl,[(H(!0),Y(He,null,Ue(ee(l).overallProgress,(v,P)=>(H(),Y("div",{key:P,class:"day-progress-bar q-mb-md"},[b("div",$l,[b("div",Ql,[b("span",{class:At(["text-weight-medium",`schedule-${P.toLowerCase()}`])},V(P),3)]),b("div",Hl,[q(Re,{value:v.percentage/100,size:"20px",color:_(P),"track-color":"grey-3",class:"rounded-borders"},{default:x(()=>[b("div",Ul,[b("span",Il,V(v.completed)+"/"+V(v.total),1)])]),_:2},1032,["value","color"])]),b("div",Zl,[b("span",Wl,V(v.percentage)+"%",1)])])]))),128))])]),_:1,__:[6]})]),_:1})]),b("div",Gl,[q(U,{flat:"",bordered:""},{default:x(()=>[q(I,null,{default:x(()=>[f[7]||(f[7]=b("div",{class:"text-h6 q-mb-md"},"Priority Breakdown",-1)),b("div",Kl,[(H(!0),Y(He,null,Ue(C.value,(v,P)=>(H(),Y("div",{key:P,class:"priority-item q-mb-md"},[b("div",Yl,[b("span",Jl,V(P)+" Priority",1),b("span",Xl,V(v),1)]),q(Re,{value:v/ee(l).totalZones,size:"8px",color:R(P),"track-color":"grey-3"},null,8,["value","color"])]))),128))])]),_:1,__:[7]})]),_:1})])])]),b("div",ea,[q(U,{flat:"",bordered:""},{default:x(()=>[q(I,null,{default:x(()=>[b("div",ta,[f[8]||(f[8]=b("div",{class:"text-h6"},"Zone Performance Details",-1)),q(Nt,{modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=v=>n.value=v),placeholder:"Search zones...",dense:"",outlined:"",style:{width:"250px"}},{prepend:x(()=>[q($,{name:"search"})]),_:1},8,["modelValue"])]),q(ql,{rows:o.value,columns:i,"row-key":"id",pagination:m.value,flat:"",bordered:"",class:"zone-table"},{"body-cell-name":x(v=>[q(J,{props:v},{default:x(()=>[b("div",la,V(v.value),1)]),_:2},1032,["props"])]),"body-cell-scheduledDay":x(v=>[q(J,{props:v},{default:x(()=>[q(Ie,{color:_(v.value),"text-color":"white",size:"sm"},{default:x(()=>[xe(V(v.value),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-priority":x(v=>[q(J,{props:v},{default:x(()=>[q(Ie,{color:R(v.value),"text-color":"white",size:"sm",icon:T(v.value)},{default:x(()=>[xe(V(v.value),1)]),_:2},1032,["color","icon"])]),_:2},1032,["props"])]),"body-cell-completed":x(v=>[q(J,{props:v},{default:x(()=>[q($,{name:v.value?"check_circle":"radio_button_unchecked",color:v.value?"positive":"grey",size:"sm"},null,8,["name","color"]),b("span",aa,V(v.value?"Completed":"Pending"),1)]),_:2},1032,["props"])]),"body-cell-lastCompleted":x(v=>[q(J,{props:v},{default:x(()=>[v.value?(H(),Y("span",oa,V(F(v.value)),1)):(H(),Y("span",na,"Never"))]),_:2},1032,["props"])]),"body-cell-actions":x(v=>[q(J,{props:v},{default:x(()=>[q(Z,{flat:"",dense:"",round:"",icon:"visibility",color:"primary",onClick:P=>ee(l).selectZone(v.row)},{default:x(()=>[q(It,null,{default:x(()=>f[9]||(f[9]=[xe("View Details",-1)])),_:1,__:[9]})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])]),_:1})]),_:1})])]),q(Wt)]),_:1}))}},fa=Kt(ra,[["__scopeId","data-v-16160c0a"]]);export{fa as default};
